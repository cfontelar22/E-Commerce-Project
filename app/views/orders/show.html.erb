<div class="order-summary">
  <h1>Order Summary</h1>

  <div class="order-details">
    <p><strong>Order ID:</strong> <%= @order.id %></p>
    <p><strong>Date:</strong> <%= @order.created_at.strftime("%B %e, %Y") %></p>
  </div>

  <h2>Customer Information:</h2>
  <div class="order-details">
    <p><strong>Name:</strong> <%= [@order.customer.first_name, @order.customer.last_name].compact.join(' ') %></p>
    <p><strong>Email:</strong> <%= @order.customer.email %></p>
    <p><strong>Address:</strong> <%= @order.customer.address %></p>
    <p><strong>City:</strong> <%= @order.customer.city %></p>
    <p><strong>Province:</strong> <%= @order.customer.province %></p>
    <p><strong>Postal Code:</strong> <%= @order.customer.postal_code %></p>
  </div>

  <h2>Order Items:</h2>
  <div class="order-items">
    <% @order.order_items.each do |item| %>
      <% if item.price.present? %> <!-- Check if there is a price before displaying -->
        <div class="order-item">
          <% if item.product.image.attached? %>
            <%= image_tag(item.product.image, class: 'product-image') %>
          <% else %>
            <p>No image available</p>
          <% end %>
          <p><%= item.product.name %> (Quantity: <%= item.quantity %>) - <%= number_to_currency(item.total_price || 0) %></p>
        </div>
      <% end %>
    <% end %>
  </div>

  <div class="totals">
    <p><span>Subtotal:</span> <span class="total-amount"><%= number_to_currency(@order.subtotal || 0) %></span></p>
    <p><span>GST Taxes:</span> <span class="total-amount"><%= number_to_currency(@order.gst || 0) %></span></p>
    <p><span>PST Taxes:</span> <span class="total-amount"><%= number_to_currency(@order.pst || 0) %></span></p>
    <p><span>HST Taxes:</span> <span class="total-amount"><%= number_to_currency(@order.hst || 0) %></span></p>
    <p><span>Total Taxes:</span> <span class="total-amount"><%= number_to_currency(@order.gst.to_d + @order.pst.to_d + @order.hst.to_d || 0) %></span></p>
    <p><span>Total Price:</span> <span class="total-amount"><%= number_to_currency(@order.total || 0) %></span></p>
  </div>
</div>
